<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Solace Event Broker Container Run Command Builder</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header class="header">
  <img src="solace-logo.png" alt="Solace" class="logo" />
  <h1>Event Broker Container Run Command Builder</h1>

  <!-- Dark mode toggle (top-right) -->
  <div class="header-spacer"></div>
  <button
    id="dark_mode_toggle"
    type="button"
    class="dark-toggle"
    aria-pressed="false"
    title="Toggle dark mode">
    Dark mode
  </button>
</header>

<main class="container">

  <!-- Deployment -->
  <details open class="card">
    <summary>Deployment Mode</summary>
    <p class="section-desc">The Solace Event Broker can be deployed in two modes:</p>
    <p class="section-desc">1. A single <i>Standalone</i> instance, suitable for quickly getting started for developer environments.</p>
    <p class="section-desc">2. A <i>High Availability</i> deployment of 3 nodes (a.k.a "a triplet"), consisting of a primary and backup messaging nodes, and a single monitor node to prevent split-brain activation.</p>
    <label>
      Deployment Mode
      <select id="mode">
        <option value="standalone" selected>Standalone</option>
        <option value="ha">High Availability</option>
      </select>
    </label>
  </details>

  <!-- Runtime, Image Repo and Restart Policy -->
  <details open class="card">
    <summary>Container Runtime, Image Repository and Restart Policy</summary>
    <p class="section-desc">Solace supports <code>docker</code> and <code>podman</code> as <a href="https://docs.solace.com/Software-Broker/SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm#configuring-the-container-runtime" target="_blank">container runtimes</a>, and the image can be pulled from Docker Hub.</p>
    <p class="section-desc">It is important for instances of Solace containers to <a href="https://docs.solace.com/Software-Broker/SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm#configuring-the-container-to-start-automatically" target="_blank">restart automatically</a> in the case of a crash or host reboot so set a restart policy accordingly.</p>
    <p class="section-desc">The default user ID in a Solace container is <a href="https://docs.solace.com/Software-Broker/Container-Tasks/Config-Arbitrary-User.htm#Configuring_Container_Users" target="_blank">1000001</a>. You can provide a specific UID available on the host machine if required to override this.</p>

    <div class="form-grid">
      <!-- Row 1: Container Runtime (full row) -->
      <label for="runtime">Container Runtime</label>
      <select id="runtime" class="span-to-end">
        <option value="docker">docker</option>
        <option value="podman">podman</option>
      </select>

      <!-- Row 1b: MacOS deploy -->
      <label for="macos">Deploying on MacOS?</label>
      <select id="macos" class="span-to-end">
        <option value="no" selected>No</option>
        <option value="yes">Yes</option>
      </select>
	  
      <!-- Row 1c: Software Edition -->
      <label for="software_edition">Software Edition</label>
      <select id="software_edition" class="span-to-end">
        <option value="standard" selected>Standard Edition</option>
        <option value="enterprise">Enterprise Edition</option>
      </select>	  

      <!-- Row 2: Image path + version -->
      <label for="image_path">Image Repository Path</label>
      <input id="image_path" value="docker.io/solace/solace-pubsub-standard" />

      <label for="image_version">Image Version/Tag</label>
      <input id="image_version" value="latest" />

      <!-- Row 3: Restart policy + UID -->
      <label for="restart_policy">Restart Policy</label>
      <select id="restart_policy">
        <option value="">none</option>
        <option value="unless-stopped" selected>unless-stopped</option>
        <option value="always">always</option>
        <option value="on-failure">on-failure</option>
      </select>

      <label for="uid">Run as UID:GID</label>
      <input id="uid" placeholder="1000001:0" />
    </div>

    <!-- MacOS Important Note (shown only when macos=yes) -->
    <div id="macos_note" class="tip-box callout callout-hidden" aria-hidden="true">
      <div class="tip-title">Important Note</div>
      <p>
        MacOS reserves port <code>55555</code> to create a conflict with the Solace container. It will be port mapped instead to
        <code>55554</code> in this case. As Solace samples by default refer to SMF port <code>55555</code>, make the adjustment to your
        usage accordingly to <code>55554</code> instead. Due to this same reason, host mode networking is not possible to select.
      </p>
    </div>
	
	<!-- Enterprise Edition Important Note (shown only when enterprise selected) -->
    <div id="enterprise_note" class="tip-box callout callout-hidden" aria-hidden="true">
      <div class="tip-title">Important Note</div>
      <p>
        The Enterprise Edition of the Solace Broker is the purchased edition and not available from Docker Hub. 
		It is provided as a compressed tar archive, containing a Docker repository of a single image.
		You can download it using your customer credentials from <a href="https://products.solace.com/prods/PubSub_Ent/" target="_blank">https://products.solace.com/</a>
      </p>
	  <p>
        The image can be loaded into a container repository used by your enterprise, to then provide the full path above.
		Alternatively, use the <code>docker</code> or <code>podman</code> load command to use a local machine container storage.
      </p>
	  <p>
        e.g. <code>docker load -i /path/to/downloaded/solace-pubsub-enterprise-10.25.x.x-docker.tar.gz</code>
      </p>
    </div>
	
  </details>

  <!-- Networking -->
  <details open class="card">
    <summary>Networking Configuration</summary>
    <p class="section-desc">The choice of <a href="https://docs.solace.com/Software-Broker/SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm#networking" target="_blank">networking mode</a> is an important consideration when deploying Solace containers.</p>
    <p class="section-desc">1. bridge networking: the container is deployed in a separate network namespace from the host, with port forwarding rules.</p>
    <p class="section-desc">2. host networking: the container is deployed in the host’s network namespace.</p>
    <p class="section-desc">3. slirp4netns networking: suitable if running rootless containers with podman.</p>

    <label>
      Network Mode
      <select id="network_mode">
        <option value="bridge" selected>bridge</option>
        <option value="host">host</option>
        <option value="slirp4netns">slirp4netns</option>
      </select>
    </label>
  </details>

  <!-- Storage -->
  <details open class="card">
    <summary>Container Storage Configuration</summary>
    <p class="section-desc">The state information associated with a Solace container should be externalised to a filesystem mount on the host machine for <a href="https://docs.solace.com/Software-Broker/SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm#configuring-storage" target="_blank">performance and ease of management</a> in the future (as some of this data is long lived.)</p>
    <p class="section-desc">The storage path on the host will be mounted to <code>/var/lib/solace</code> in the container's filesystem and will need to be built with XFS, and have <u>write access</u> for the container user ID.</p>

    <label>Storage Path on Host
      <input id="storage_path" placeholder="/mnt/extfs/containers/solace/storage-group" />
    </label>

    <!-- Only show when runtime=podman AND network_mode=slirp4netns -->
    <div id="storage_tip_podman_slirp" class="tip-box callout callout-hidden" aria-hidden="true">
      <div class="tip-title">Important Note</div>
      <p>
        If running rootless containers (with <code>podman</code>), take extra care to manage the directory permissions of the above path.
      </p>
      <p>
        The filesystem inside the Solace container is owned by root, and attempts to write to a location owned by an unprivileged user on the host will fail.
      </p>
      <p>
        Use the command
        <code>"podman unshare chown -R &lt;container-UID&gt;:&lt;container-GID&gt; /path/to/host/storage"</code>
        so the container can write to it. See <a href="https://docs.solace.com/Software-Broker/Container-Tasks/Config-Container-Storage.htm#directory-ownership-with-rootless-containers"
           target="_blank">the documentation</a> for more information.
      </p>
    </div>
  </details>

  <!-- Password -->
  <details open class="card">
    <summary>Password Configuration</summary>
    <p class="section-desc">When a Solace container is started, a default user for admin access can be created to allow immediate usage for CLI login or the Management UI.</p>
    <p class="section-desc">This user will be called <code>admin</code> with the initial password possible to be supplied in one of three ways:</p>
    <p class="section-desc">1. Plain text string: suitable for quick-start developer environments.</p>
    <p class="section-desc">2. Password file path: a file on the host filesystem to read for the password.</p>
    <p class="section-desc">3. Encrypted password: provide a previously encrypted password.</p>

    <label>
      Password Input Method
      <select id="password_method">
        <option value="password" selected>password</option>
        <option value="password_file">password file path</option>
        <option value="encrypted_password">encrypted password</option>
      </select>
    </label>

    <label>
      Password Value / Path
      <input id="pw_value" placeholder="Enter password, path, or encrypted value" value="mysecret">
    </label>

    <!-- Only show when password_method=file_path -->
    <div id="pw_filepath_note" class="tip-box callout callout-hidden" aria-hidden="true">
	  <div class="tip-title">Important Note</div>
	  <p>When using this option, load the file into your container runtime's <code>secret</code> filesystem first.</p>
	  <p><code>/run/secrets</code> is a temporary, in-memory filesystem location inside a container where sensitive data (secrets) are mounted at runtime instead of being baked into images or passed via environment variables.</p>
	  <p>e.g. <code>docker secret create solace-secrets admin-pass.txt</code> to add the file into a secrets filesystem called <code>solace-secrets</code></p>
	  <p>Then when running the container, include the extra argument <code>--secret solace-secrets</code></p>
	</div>	
	
    <!-- Only show when password_method=encrypted_password -->
    <div id="pw_encrypted_note" class="tip-box callout callout-hidden" aria-hidden="true">
      <div class="tip-title">Important Note</div>
      <p>
        The encrypted password must be a SHA-512 hash, generated using a random string <i>salt</i>.
      </p>
      <p>
        Provide it above in the format: <code>$6$&lt;salt string&gt;$&lt;password-hash&gt;</code> e.g. <code>$6$uE7L+w62wAI4$A0A5D01...1F65E441134AE01256</code>
      </p>
      <p>
        Online hash generators such as <a href="https://randommer.io/Hash/SHA512" target="_blank">https://randommer.io/Hash/SHA512</a> can be used for this.
      </p>
    </div>
  </details>

  <!-- Ports wrapper: fade this whole block -->
  <div id="ports_wrap" class="fade-section">
    <details open class="card" id="ports_section">
      <summary>Protocols and Port Forwarding</summary>
      <p class="section-desc">As Solace is a multi-protocol broker, the services are provided over a number of different ports.</p>
      <p class="section-desc">Select the protocols you intend to use so that the port forwarding rules can be constructed between the container's network namespace and the host network.</p>

      <div class="ports-toolbar">
        <div class="ports-actions">
          <button type="button" class="ports-btn" data-action="clear-ports" title="Unchecks all protocol ports.">Clear all</button>
          <button type="button" class="ports-btn ports-btn-primary" title="Selects the recommended minimum." data-action="recommended-ports">Recommended minimum</button>
          <button type="button" class="ports-btn" title="Unchecks all non-TLS (Plain) protocol ports." data-action="tls-only-ports">TLS Secured Ports Only</button>
        </div>
      </div>
      <br/>
      <div class="ports-groups">
        <!-- SMF -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>Solace Messaging Protocol (SMF)</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="55555,55443" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="55555" /></td>
              <td class="ports-label">SMF (Plain)</td>
              <td class="ports-port">55555</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="55443" /></td>
              <td class="ports-label">SMF (Secure TLS)</td>
              <td class="ports-port">55443</td>
            </tr>
          </table>
        </section>

        <!-- Web Messaging -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>Solace Messaging (SMF) over WebSocket</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="8008,1443" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="8008" /></td>
              <td class="ports-label">WebSocket (Plain)</td>
              <td class="ports-port">8008</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="1443" /></td>
              <td class="ports-label">WebSocket (Secure TLS)</td>
              <td class="ports-port">1443</td>
            </tr>
          </table>
        </section>

        <!-- AMQP -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>AMQP</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="5672,5671" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="5672" /></td>
              <td class="ports-label">AMQP (Plain)</td>
              <td class="ports-port">5672</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="5671" /></td>
              <td class="ports-label">AMQP (Secure TLS)</td>
              <td class="ports-port">5671</td>
            </tr>
          </table>
        </section>

        <!-- MQTT -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>MQTT</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="1883,8883,8000,8443" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="1883" /></td>
              <td class="ports-label">MQTT (Plain)</td>
              <td class="ports-port">1883</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="8883" /></td>
              <td class="ports-label">MQTT (Secure TLS)</td>
              <td class="ports-port">8883</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="8000" /></td>
              <td class="ports-label">MQTT WebSocket (Plain)</td>
              <td class="ports-port">8000</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="8443" /></td>
              <td class="ports-label">MQTT WebSocket (Secure TLS)</td>
              <td class="ports-port">8443</td>
            </tr>
          </table>
        </section>

        <!-- REST -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>REST/HTTP Messaging</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="9000,9443" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="9000" /></td>
              <td class="ports-label">REST (Plain)</td>
              <td class="ports-port">9000</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="9443" /></td>
              <td class="ports-label">REST (Secure TLS)</td>
              <td class="ports-port">9443</td>
            </tr>
          </table>
        </section>

        <!-- SEMP -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>SEMP (Management API)</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="8080,1943" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="8080" /></td>
              <td class="ports-label">SEMP (Plain)</td>
              <td class="ports-port">8080</td>
            </tr>
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="1943" /></td>
              <td class="ports-label">SEMP (Secure TLS)</td>
              <td class="ports-port">1943</td>
            </tr>
          </table>
        </section>

        <!-- CLI -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>Command Line Interface over SSH</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="2222" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="2222" /></td>
              <td class="ports-label">CLI (SSH)</td>
              <td class="ports-port">2222</td>
            </tr>
          </table>
        </section>
		
        <!-- MNR -->
        <section class="ports-group">
          <div class="ports-group-header">
            <h3>Multi-Node Routing (MNR)</h3>
            <button type="button" class="ports-btn ports-btn-toggle" title="Selects or clears all ports in this protocol group." data-toggle-ports="55556" data-action="toggle-protocol">Select all</button>
          </div>
          <table class="ports-table">
            <tr>
              <td class="ports-check"><input type="checkbox" data-port="55556" /></td>
              <td class="ports-label">MNR Control Port</td>
              <td class="ports-port">55556</td>
            </tr>
          </table>
        </section>		
      </div>
      <br/>
      <small>Note: Additional ports related to communication between HA nodes are automatically included when HA mode is selected and are not explicitly shown here.</small>
    </details>
  </div>

  <!-- Scaling -->
  <details open class="card">
    <summary>Scaling Parameters</summary>
    <p class="section-desc">A Solace broker can be deployed in multiple <a href="https://docs.solace.com/Software-Broker/System-Scaling-Parameters.htm" target="_blank">scaling tiers</a>, with capacity limits and host resource usage matching the intended use-case.</p>
    <p class="section-desc">Ensure the minimum resource requirements are met for a successful container start. The default scaling levels set below are for the minimal size developer instance.</p>

    <div class="spool-input-wrap">
      <div class="spool-input-label">
        <span>Max Message Spool Usage</span>
        <span class="help-icon" title="Maximum amount of disk space that can be used to spool guaranteed messages.">?</span>
      </div>

      <div class="spool-input-control">
        <input id="max_spool_usage_gb" type="number" min="0" max="6000" step="0.5" value="1.5" />
        <span class="spool-unit">GB</span>
      </div>
    </div>

    <div class="scaling-sliders-and-summary">
      <div class="scaling-sliders">

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Connections</div>
            <div class="scaling-help" title="Maximum number of client connections allowed to the broker at any one time." aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxconnections">100</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxconnections" class="scaling-range" type="range" min="0" max="4" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span><span></span><span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>100</span><span>1,000</span><span>10,000</span><span>100,000</span><span>200,000</span>
            </div>
          </div>
        </div>

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Queue Messages</div>
            <div class="scaling-help" title="Maximum number of references to messages queued for delivery to consumers across the broker as a whole. (Unit: millions)" aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxqueuemsg">100M</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxqueuemsg" class="scaling-range" type="range" min="0" max="2" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>100M</span><span>240M</span><span>3000M</span>
            </div>
          </div>
        </div>

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Kafka Bridges</div>
            <div class="scaling-help" title="The maximum number of Kafka bridges that can be created on the broker. (Should be set >0 along with the broker connections parameter.)" aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxkafkabridges">0</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxkafkabridges" class="scaling-range" type="range" min="0" max="3" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span><span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>0</span><span>10</span><span>50</span><span>200</span>
            </div>
          </div>
        </div>

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Kafka Broker Connections</div>
            <div class="scaling-help" title="The maximum number of Kafka broker connections. (Should be set >0 along with the Kafka bridge count parameter.)" aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxkafkabrokerconns">0</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxkafkabrokerconns" class="scaling-range" type="range" min="0" max="3" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span><span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>0</span><span>300</span><span>2,000</span><span>10,000</span>
            </div>
          </div>
        </div>

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Bridges</div>
            <div class="scaling-help" title="Maximum number of message VPN bridges that can be created across the whole broker." aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxbridges">25</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxbridges" class="scaling-range" type="range" min="0" max="2" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>25</span><span>500</span><span>5,000</span>
            </div>
          </div>
        </div>

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Subscriptions</div>
            <div class="scaling-help" title="Maximum number of subscriptions across the broker as a whole. If the broker is part of a DMR network, it should match this number with the other nodes in the network. " aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxsubs">50,000</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxsubs" class="scaling-range" type="range" min="0" max="2" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>50,000</span><span>500,000</span><span>5,000,000</span>
            </div>
          </div>
        </div>

        <div class="scaling-row">
          <div class="scaling-left">
            <div class="scaling-label">Max Guaranteed Message Size</div>
            <div class="scaling-help" title="The maximum size of a guaranteed message that can be sent to the broker. (Unit: MB)" aria-hidden="true">?</div>
          </div>
          <div class="scaling-right">
            <div class="scaling-trackline">
              <span class="scaling-badge" id="badge_maxgmsize">10</span>

              <div class="scaling-track-wrap">
                <span class="enterprise-label" aria-hidden="true">Enterprise</span>
                <input id="sp_maxgmsize" class="scaling-range" type="range" min="0" max="1" step="1" value="0" />
                <div class="scaling-stop-dots" aria-hidden="true">
                  <span></span><span></span>
                </div>
              </div>
            </div>
            <div class="scaling-ticks">
              <span>10</span><span>30</span>
            </div>
          </div>
        </div>

      </div>

      <aside class="scaling-resource-summary" aria-live="polite">
        <div class="scaling-resource-summary__title">Host Resource Requirements</div>

        <div class="scaling-resource-summary__grid">
		  <div class="sum-row"><small><b>Message-Routing Nodes:</b></small></div>
          <div class="sum-row"><span>CPU <span class="help-icon" title="The required number of CPU cores.">?</span></span><strong id="res_cpu">—</strong></div>
          <div class="sum-row"><span>Host Virtual Memory <span class="help-icon" title="The recommended amount of memory to allocate to the container in Mebibytes (2^20 bytes)">?</span></span><strong id="res_hvm">—</strong></div>
          <div class="sum-row"><span>Memory Control Group Limit <span class="help-icon" title="An optional configuration to limit the memory consumption of the container using a Linux control group.">?</span></span><strong id="res_cgroup">—</strong></div>
          <div class="sum-row"><span>Posix Shared Mem (/dev/shm) <span class="help-icon" title="The amount of memory to allocate to /dev/shm">?</span></span><strong id="res_shm">—</strong></div>
          <div class="sum-row"><span>Container Runtime Backing Store <span class="help-icon" title="The amount of storage required for container specific files and temporary data.">?</span></span><strong id="res_backing">—</strong></div>
          <div class="sum-row"><span>Disk Storage <span class="help-icon" title="The total amount of storage required for the storage-group.">?</span></span><strong id="res_storage">—</strong></div>
          <div class="sum-row"></div>
		  <div class="sum-row"><small><b>Monitoring Nodes:</b></small></div>
          <div class="sum-row"><span>CPU</span><strong id="res_cpu_mon">—</strong></div>
          <div class="sum-row"><span>Host Virtual Memory</span><strong id="res_hvm_mon">—</strong></div>
          <div class="sum-row"><span>Memory Control Group Limit</span><strong id="res_cgroup_mon">—</strong></div>
          <div class="sum-row"><span>Posix Shared Mem (/dev/shm)</span><strong id="res_shm_mon">—</strong></div>
          <div class="sum-row"><span>Container Runtime Backing Store</span><strong id="res_backing_mon">—</strong></div>
          <div class="sum-row"><span>Disk Storage</span><strong id="res_storage_mon">—</strong></div>

        </div>
      </aside>
    </div>

    <div id="scaling_limit_note" class="tip-box callout callout-hidden" aria-hidden="true">
      <div class="tip-title">Important Note</div>
      <p>Standard Edition has lower message spool and scaling limits. If you need higher limits, select Enterprise Edition.</p>
    </div>
	
    <!-- The starting/default set of scaling parameters that are included, in a hidden textarea, to get modified by sliders -->
    <textarea id="scaling_params" rows="4" class="scaling-hidden-textarea">--ulimit core=-1 --ulimit nofile=2448:1048576 --shm-size=1g --env system_scaling_maxconnectioncount=100 --env system_scaling_maxqueuemessagecount=100 --env system_scaling_maxkafkabridgecount=0 --env system_scaling_maxkafkabrokerconnectioncount=0 --env system_scaling_maxbridgecount=25 --env system_scaling_maxsubscriptioncount=50000 --env system_scaling_maxguaranteedmessagesize=10 --env messagespool_maxspoolusage=1500</textarea>
  </details>

  <!-- Standalone -->
  <details open id="standalone_section" class="card">
    <summary>Standalone Broker Configuration</summary>
    <p class="section-desc">For the simple standalone instance, provide a suitable name for the container to use in the generated run command.</p>
    <label>
      Broker and Container Name
      <input id="standalone_name" value="solace" />
    </label>
  </details>

  <!-- HA -->
  <details open id="ha_section" class="card" style="display:none">
    <summary>High Availability Configuration</summary>
    <p class="section-desc">When deploying a <a href="https://docs.solace.com/Features/HA-Redundancy/SW-Broker-Redundancy-and-Fault-Tolerance.htm" target="_blank">High Availability triplet</a> of Solace containers, they are configured with awareness of each other in terms of name and network location.</p>
    <p class="section-desc">Provide a suitable name for each of the nodes to deploy, along with an IP address or fully qualified domain name (FQDN) on how each node may connect to the other 2.</p>

    <table class="ha-table">
      <thead>
        <tr>
          <th>Node</th>
          <th>Broker and Container Name</th>
          <th>Host IP address or FQDN</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Primary node</td>
          <td><input id="ha_primary_name" value="solace1p" /></td>
          <td><input id="ha_primary_host" value="solace1p.mydomain.net" /></td>
        </tr>
        <tr>
          <td>Backup node</td>
          <td><input id="ha_backup_name" value="solace1b" /></td>
          <td><input id="ha_backup_host" value="solace1b.mydomain.net" /></td>
        </tr>
        <tr>
          <td>Monitor node</td>
          <td><input id="ha_monitor_name" value="solace1m" /></td>
          <td><input id="ha_monitor_host" value="solace1m.mydomain.net" /></td>
        </tr>
      </tbody>
    </table>

    <p class="section-desc">Every node is also configured with a Pre-Shared Authentication Key to allow each to connect to another.</p>
    <p class="section-desc">This is 44 to 344 characters (which translates into 32 to 256 bytes of binary data encoded in base 64) and can be generated below.</p>

    <div class="ha-psk-block">
      <label for="ha_psk_value">Pre-shared key</label>

      <div class="ha-psk-keyline">
        <input id="ha_psk_value" type="text" placeholder="Click Generate to create a secure key (44–344 chars)" autocomplete="off" />
        <button type="button" class="ports-btn" onclick="generateHaPsk()">Generate</button>
      </div>

      <label for="ha_psk_mode">Provide pre-shared key using</label>
      <select id="ha_psk_mode">
        <option value="direct" selected>Argument value</option>
        <option value="file">File path</option>
      </select>

      <div id="ha_psk_file_row" style="display:none;">
        <label for="ha_psk_filepath">Pre-shared key file path</label>
        <input id="ha_psk_filepath" type="text" placeholder="solace-presharedkey.txt" autocomplete="off" value="solace-presharedkey.txt" />
		<div id="secret_psk_note" class="tip-box callout" >
		  <div class="tip-title">Important Note</div>
		  <p>When using this option, load the file into your container runtime's <code>secret</code> filesystem first.</p>
		  <p><code>/run/secrets</code> is a temporary, in-memory filesystem location inside a container where sensitive data (secrets) are mounted at runtime instead of being baked into images or passed via environment variables.</p>
		  <p>e.g. <code>podman secret create solace-secrets solace-presharedkey.txt</code> to add the file into a secrets filesystem called <code>solace-secrets</code></p>
		  <p>Then when running the container, include the extra argument <code>--secret solace-secrets</code></p>
		</div>		
      </div>
    </div>
  </details>

  <!-- TLS Server Certificate (optional) -->
  <details class="card">
    <summary>TLS Server Certificate</summary>
    <p class="section-desc">If setting up your broker to use TLS connections, provide a server certificate file path, and optionally a passphrase file path if the certificate is encrypted.</p>

    <label for="tls_servercertificate_filepath">Certificate file path</label>
    <input id="tls_servercertificate_filepath" type="text" placeholder="server-certificate.p12" autocomplete="off" />

    <label for="tls_servercertificate_passphrasefilepath">Passphrase file path (optional)</label>
    <input id="tls_servercertificate_passphrasefilepath" type="text" placeholder="passphrase.txt" autocomplete="off" />
	<div id="certs_note" class="tip-box callout" >
	  <div class="tip-title">Important Note</div>
	  <p>Load the file(s) into your container runtime's <code>secret</code> filesystem first.</p>
	  <p><code>/run/secrets</code> is a temporary, in-memory filesystem location inside a container where sensitive data (secrets) are mounted at runtime instead of being baked into images or passed via environment variables.</p>
	  <p>e.g. <code>podman secret create solace-secrets server-certificate.p12</code> to add the file into a secrets filesystem called <code>solace-secrets</code></p>
	  <p>Then when running the container, include the extra argument <code>--secret solace-secrets</code></p>
	</div>	
  </details>

<!-- OUTPUT -->
  <section class="card">
    <div class="output-header-row">
      <h2 class="output-title">Generated Output</h2>

      <label class="output-format">
        Output format
        <select id="output_format">
          <option value="run" selected>Run Commands</option>
          <option value="compose">Docker Compose (per-host)</option>
        </select>
      </label>
    </div>

    <!-- RUN COMMAND OUTPUTS -->
    <div id="run_outputs">
      <div id="out-standalone" class="output-box">
        <header>
          Standalone node container start command
          <button type="button" data-action="copy-out" data-target="output">Copy</button>
        </header>
        <pre id="output"></pre>
      </div>

      <div id="out-primary" class="output-box" style="display:none">
        <header>
          Primary node container start command
          <button type="button" data-action="copy-out" data-target="output-primary">Copy</button>
        </header>
        <pre id="output-primary"></pre>
      </div>

      <div id="out-backup" class="output-box" style="display:none">
        <header>
          Backup node container start command
          <button type="button" data-action="copy-out" data-target="output-backup">Copy</button>
        </header>
        <pre id="output-backup"></pre>
      </div>

      <div id="out-monitor" class="output-box" style="display:none">
        <header>
          Monitor node container start command
          <button type="button" data-action="copy-out" data-target="output-monitor">Copy</button>
        </header>
        <pre id="output-monitor"></pre>
      </div>

      <div id="ha-post-deploy-tips" class="tip-box callout callout-hidden" aria-hidden="true">
        <div class="tip-title">Important Note</div>
        <p>
          After deploying a High-Availability broker group, you need to designate one of the brokers as the config-sync 'leader' after all are successfully running.
        </p>
        <p>
          See <a href="https://docs.solace.com/Features/Config-Sync/Configuring-Config-Sync.htm#Assertin" target="_blank">here</a> for more instructions.
        </p>
      </div>
    </div>

    <!-- COMPOSE YAML OUTPUTS -->
    <div id="compose_outputs" style="display:none">
      <div id="compose-out-standalone" class="output-box">
        <header>
          Standalone node docker-compose.yml (deploy on standalone host)
          <div class="out-actions">
            <button type="button" data-action="copy-out" data-target="compose-standalone">Copy</button>
            <button type="button" class="btn-secondary" data-action="download-out" data-target="compose-standalone" data-filename="docker-compose.yml">Download</button>
          </div>
        </header>
        <pre id="compose-standalone"></pre>
      </div>

      <div id="compose-out-primary" class="output-box" style="display:none">
        <header>
          Primary node docker-compose.yml (deploy on primary host)
          <div class="out-actions">
            <button type="button" data-action="copy-out" data-target="compose-primary">Copy</button>
            <button type="button" class="btn-secondary" data-action="download-out" data-target="compose-primary" data-filename="docker-compose-primary.yml">Download</button>
          </div>
        </header>
        <pre id="compose-primary"></pre>
      </div>

      <div id="compose-out-backup" class="output-box" style="display:none">
        <header>
          Backup node docker-compose.yml (deploy on backup host)
          <div class="out-actions">
            <button type="button" data-action="copy-out" data-target="compose-backup">Copy</button>
            <button type="button" class="btn-secondary" data-action="download-out" data-target="compose-backup" data-filename="docker-compose-backup.yml">Download</button>
          </div>
        </header>
        <pre id="compose-backup"></pre>
      </div>

      <div id="compose-out-monitor" class="output-box" style="display:none">
        <header>
          Monitor node docker-compose.yml (deploy on monitor host)
          <div class="out-actions">
            <button type="button" data-action="copy-out" data-target="compose-monitor">Copy</button>
            <button type="button" class="btn-secondary" data-action="download-out" data-target="compose-monitor" data-filename="docker-compose-monitor.yml">Download</button>
          </div>
        </header>
        <pre id="compose-monitor"></pre>
      </div>
    </div>

  </section>

</main>

<script src="app.js"></script>

</body>
</html>